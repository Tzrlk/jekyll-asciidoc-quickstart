<!doctype html>
<html lang="en" itemscope itemtype="http://schema.org/Blog">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title itemprop="name">Tzrlk: Updating Git on Centos 6/7</title>

	<meta name="description" itemprop="description"
	      content="The personal site of Peter Cummuskey" />

	<meta name="author" itemprop="author"
	      content="Peter Cummuskey" />

	<meta name="copyright"
	      content="Peter Cummuskey 2016" />

	<!-- Assets -->
	<link rel="stylesheet"
	      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
	      integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0="
	      crossorigin="anonymous" />

	<!-- CONSIDER SWITCHING TO http://bulma.io/
	<link rel="stylesheet"
	      href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.4.1/css/bulma.min.css"
	      integrity="sha256-n+Ch7oRdzZ9+8/inp+1mK/0Bt4T/2PSmo4L6YGoDiVM="
	      crossorigin="anonymous" />-->

	<!-- Styles -->
	<link rel="stylesheet"
	      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css"
	      integrity="sha256-HxaKz5E/eBbvhGMNwhWRPrAR9i/lG1JeT4mD6hCQ7s4="
	      crossorigin="anonymous" />
	<link rel="stylesheet"
	      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"
	      integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w="
	      crossorigin="anonymous" />
	<link rel="stylesheet"
	      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/css/bootstrap-material-design.min.css"
	      integrity="sha256-j3CLSRG31GkOu6kaeLh7XsRgL2YNvRl9aOtXoAYt320="
	      crossorigin="anonymous" />
	<link rel="stylesheet"
	      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/css/ripples.min.css"
	      integrity="sha256-+Og2qJI9qzvKYwhGo/LYXg0FzE1BhEQfDsUSjKXQ3Bg="
	      crossorigin="anonymous" />
	<link rel="stylesheet"
	      href="https://cdn.rawgit.com/richleland/pygments-css/master/tango.css" />

</head>
<body>


<!-- Nav Bar -->

<nav class="navbar navbar-default" data-topbar>
	<div class="container-fluid">

		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#nav-top" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="/">Tzrlk</a>
		</div>

		<div class="collapse navbar-collapse" id="nav-top">
			<ul class="nav navbar-nav">

				<li role="presentation">
					<a href="/about">About Me</a>
				</li>

			</ul>
		</div>

	</div>
</nav>
<!-- End Nav -->


<div class="container-fluid">

	<aside class="col-md-3 col-lg-2">
		<div class="row">

			<nav class="col-xs-12 col-sm-4 col-md-12">
				<h4>Contents</h4>
				<div id="toc"></div>
			</nav>

			<section class="col-xs-12 col-sm-4 col-md-12">
				<h4>Flair</h4>
				<a href="https://stackexchange.com/users/18122" class="panel">
					<img src="https://stackexchange.com/users/flair/18122.png?theme=clean"
					     width="208" height="58" alt="Tzrlk on Stackexchange"/>
				</a>
			</section>

		</div>
	</aside>

	<main class="col-md-9 col-lg-10" role="content">
		<div class="container" style="margin-left: 0;">

			<div class="post" itemscope itemtype="http://schema.org/BlogPosting">

	<header class="post-header">
		<h1 class="post-title" itemprop="name">Updating Git on Centos 6/7</h1>
		<p class="post-meta">
			<meta itemprop="keywords" content="" />
			<span itemprop="author" itemscope itemtype="http://schema.org/Person">
				<a href="/about" rel="author" itemprop="url">Peter Cummuskey</a>
			</span>
			<span class="hyphen">-</span>
			<time itemprop="datePublished" datetime="2017-05-22T00:00:00+12:00">
				May 22, 2017
			</time>
		</p>
	</header>

	<article class="post-content" itemprop="articleBody">
		<p itemprop="description">So, I had to update git on a couple of Centos machines last week, and I ran into what appears to be a very common problem: Centos only has old versions of stuff in its repos. Subsequently, I had to figure out how to get the latest, and preferably from a yum repo, rather than installing it manually. Cue repo connection issues.</p>

<h2 id="the-story">The Story</h2>

<p>When working behind a corporate proxy, a number of things can go awry without any good indication of what is <em>actually</em> wrong. Installing the needed repos gave me no issues on one server (centos 6), but threw a fit trying to connect on another. The reason? SSL validation failure. The solution? Depends on how much you want to compromise your system.</p>

<p>A bunch of people suggested just changing the repo url in your /etc/yum.repos.d/epel to be http instead of https, but that’s dumb. Another suggested updating the ca-certs package, but that still won’t work if you had the same issue I did: Self-signed root CA certificates with an intercepting proxy.</p>

<h2 id="the-method">The Method</h2>

<p>The quick guide to installing the latest git on Centos is fairly straightforward:</p>

<figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="c"># Update certs package:</span>
yum update ca-certificates

<span class="c"># Install Company CA Certificate:</span>
update-ca-trust force-enable
cp <span class="k">${</span><span class="nv">certfile</span><span class="k">}</span> /etc/pki/ca-trust/source/anchors/
update-ca-trust extract

<span class="c"># Install IUS repo:</span>
rpm -i https://centos<span class="k">${</span><span class="nv">version</span><span class="k">}</span>.iuscommunity.org/ius-release.rpm <span class="o">||</span> <span class="o">{</span>

	<span class="c"># If there's trouble installing the epel releases repo:</span>
	rpm -i https://dl.fedoraproject.org/pub/epel/epel-release-latest-<span class="k">${</span><span class="nv">version</span><span class="k">}</span>.noarch.rpm
	
	<span class="c"># Then just repeat the ius install.</span>
	rpm -i https://centos<span class="k">${</span><span class="nv">version</span><span class="k">}</span>.iuscommunity.org/ius-release.rpm

<span class="o">}</span>

<span class="c"># Update yum cache and install git:</span>

yum makecache fast
yum install git2u -y <span class="o">||</span> <span class="o">{</span>

	<span class="c"># If there's trouble installing the git package:</span>
	yum clean all

	<span class="c"># Then just repeat the install.</span>
	yum makecache fast
	yum install git2u -y

<span class="o">}</span>

<span class="c"># You may need to log-out and log-in again to get the shell to refresh your git version, but after that, everything should be working just fine.</span></code></pre></figure>

<h2 id="the-conclusion">The Conclusion</h2>

<p>Thankfully, you’ll only need to ever do the first part once. Steps 4-5 may be necessary for other packages however. It’s a pain that it doesn’t tell you that the issue is an SSL cert trust failure, but googling the error turns up plenty of help. Hopefully this one will get some notice.</p>


	</article>

</div>


		</div>
	</main>

</div>


<footer class="container-fluid">
	<div class="col-xs-12">
		<div class="row">

			<ol class="breadcrumb">
				<li><a href="http://aetheric.co.nz/">Aetheric Engineering</a></li>
				<li><a href="">Tzrlk</a></li>
				<li class="active">Updating Git on Centos 6/7: </li>
			</ol>

		</div>
	</div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous"></script>

<!-- Polyfills -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
        integrity="sha256-0rguYS0qgS6L4qVzANq4kjxPLtvnp5nn2nB5G1lWRv4="
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"
        integrity="sha256-t6SrqvTQmKoGgi5LOl0AUy+lBRtIvEJ+++pLAsfAjWs="
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-placeholder/2.3.1/jquery.placeholder.min.js"
        integrity="sha256-vo4hFjZ2XisF8ql7P6kGVCDAbuW68h6P2WunwD+QI54="
        crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8="
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/js/material.min.js"
        integrity="sha256-uZbIqasulk7Y9yEwknbeQ0FpF3aUhtPwuggbpvQaI8Y="
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/js/ripples.min.js"
        integrity="sha256-TY/EO/++Ug/P+fSBjaqlmtuphCBKwlP7TOnS+SGnN8g="
        crossorigin="anonymous"></script>

<script src="/js/toc.js"></script>
<script type="text/javascript">
$(document).ready(function() {
	$('#toc').toc({
		headers: 'h2, h3',
		listClasses: 'nav nav-pills nav-stacked'
	});
});
</script>

</body>
</html>
